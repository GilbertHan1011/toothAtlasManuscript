selector_to_html = {"a[href=\"#conclusion\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Conclusion<a class=\"headerlink\" href=\"#conclusion\" title=\"Permalink to this heading\">#</a></h2><p>By applying these methods, we meticulously evaluated each dataset to effectively minimize technical variation while preserving biological variation. This careful consideration ensures that our reference atlas maintains high resolution in distinguishing cell states, which is essential for accurate biological interpretation.</p>", "a[href=\"#references\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">References<a class=\"headerlink\" href=\"#references\" title=\"Permalink to this heading\">#</a></h2>", "a[href=\"#methods\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Methods<a class=\"headerlink\" href=\"#methods\" title=\"Permalink to this heading\">#</a></h2><h3>Quantifying the Source of Variance<a class=\"headerlink\" href=\"#quantifying-the-source-of-variance\" title=\"Permalink to this heading\">#</a></h3><p>Inspired by two excellent papers <span id=\"id4\">[<a class=\"reference internal\" href=\"../references.html#id25\" title=\"Maren B\u00fcttner, Zhichao Miao, F. Alexander Wolf, Sarah A. Teichmann, and Fabian J. Theis. A test metric for assessing single-cell RNA-seq batch correction. Nature Methods, 16(1):43\u201349, January 2019. doi:10.1038/s41592-018-0254-1.\">B\u00fcttner <em>et al.</em>, 2019</a>]</span>, we adopted two methods to determine the appropriate batch covariates. First, we conducted principal component regression to calculate the fraction of variance explained by the covariate of interest within the first 50 principal components. Our analysis revealed that, in some samples, the variance in cell type was considerably greater than the variance across samples. Consequently, it is more appropriate to treat the entire dataset as a single batch rather than treating each of the six samples as separate batches. Conversely, in the CranioSoxc_Angelozzi dataset, sample variance was even greater than cell type variance. Therefore, it is more appropriate to treat each of the six samples as individual batches in this case.</p>", "a[href=\"#batch-division\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\">Batch division<a class=\"headerlink\" href=\"#batch-division\" title=\"Permalink to this heading\">#</a></h1>", "a[href=\"#quantifying-the-source-of-variance\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Quantifying the Source of Variance<a class=\"headerlink\" href=\"#quantifying-the-source-of-variance\" title=\"Permalink to this heading\">#</a></h3><p>Inspired by two excellent papers <span id=\"id4\">[<a class=\"reference internal\" href=\"../references.html#id25\" title=\"Maren B\u00fcttner, Zhichao Miao, F. Alexander Wolf, Sarah A. Teichmann, and Fabian J. Theis. A test metric for assessing single-cell RNA-seq batch correction. Nature Methods, 16(1):43\u201349, January 2019. doi:10.1038/s41592-018-0254-1.\">B\u00fcttner <em>et al.</em>, 2019</a>]</span>, we adopted two methods to determine the appropriate batch covariates. First, we conducted principal component regression to calculate the fraction of variance explained by the covariate of interest within the first 50 principal components. Our analysis revealed that, in some samples, the variance in cell type was considerably greater than the variance across samples. Consequently, it is more appropriate to treat the entire dataset as a single batch rather than treating each of the six samples as separate batches. Conversely, in the CranioSoxc_Angelozzi dataset, sample variance was even greater than cell type variance. Therefore, it is more appropriate to treat each of the six samples as individual batches in this case.</p>", "a[href=\"#introduction\"]": "<h2 class=\"tippy-header\" style=\"margin-top: 0;\">Introduction<a class=\"headerlink\" href=\"#introduction\" title=\"Permalink to this heading\">#</a></h2><p>Batch correction algorithms have the potential to remove not only technical variation but also biological variation <span id=\"id2\">[<a class=\"reference internal\" href=\"../references.html#id24\" title=\"Hui Li, Davis J. McCarthy, Heejung Shim, and Susan Wei. Trade-off between conservation of biological variation and batch effect removal in deep generative modeling for single-cell transcriptomics. BMC Bioinformatics, 23(1):1\u201322, November 2022. doi:10.1186/s12859-022-05003-3.\">Li <em>et al.</em>, 2022</a>]</span>. In our reference atlas, it is crucial to distinguish cell states with fine resolution, making it essential to differentiate between technical and biological variation. Our atlas includes multi-level batch covariates, such as datasets, samples, age, and tissue location. Deciding which levels of variation to retain and which to correct can significantly impact the results. Although batch division is not a common step in regular single-cell RNA sequencing (scRNA-seq) data analysis, constructing comprehensive atlases often involves this step <span id=\"id3\">[<a class=\"reference internal\" href=\"../references.html#id25\" title=\"Maren B\u00fcttner, Zhichao Miao, F. Alexander Wolf, Sarah A. Teichmann, and Fabian J. Theis. A test metric for assessing single-cell RNA-seq batch correction. Nature Methods, 16(1):43\u201349, January 2019. doi:10.1038/s41592-018-0254-1.\">B\u00fcttner <em>et al.</em>, 2019</a>]</span>.</p>", "a[href=\"#id1\"]": "<h1 class=\"tippy-header\" style=\"margin-top: 0;\">Batch Division<a class=\"headerlink\" href=\"#id1\" title=\"Permalink to this heading\">#</a></h1><h2>Introduction<a class=\"headerlink\" href=\"#introduction\" title=\"Permalink to this heading\">#</a></h2><p>Batch correction algorithms have the potential to remove not only technical variation but also biological variation <span id=\"id2\">[<a class=\"reference internal\" href=\"../references.html#id24\" title=\"Hui Li, Davis J. McCarthy, Heejung Shim, and Susan Wei. Trade-off between conservation of biological variation and batch effect removal in deep generative modeling for single-cell transcriptomics. BMC Bioinformatics, 23(1):1\u201322, November 2022. doi:10.1186/s12859-022-05003-3.\">Li <em>et al.</em>, 2022</a>]</span>. In our reference atlas, it is crucial to distinguish cell states with fine resolution, making it essential to differentiate between technical and biological variation. Our atlas includes multi-level batch covariates, such as datasets, samples, age, and tissue location. Deciding which levels of variation to retain and which to correct can significantly impact the results. Although batch division is not a common step in regular single-cell RNA sequencing (scRNA-seq) data analysis, constructing comprehensive atlases often involves this step <span id=\"id3\">[<a class=\"reference internal\" href=\"../references.html#id25\" title=\"Maren B\u00fcttner, Zhichao Miao, F. Alexander Wolf, Sarah A. Teichmann, and Fabian J. Theis. A test metric for assessing single-cell RNA-seq batch correction. Nature Methods, 16(1):43\u201349, January 2019. doi:10.1038/s41592-018-0254-1.\">B\u00fcttner <em>et al.</em>, 2019</a>]</span>.</p>", "a[href=\"#quantifying-batch-effects-through-kbet\"]": "<h3 class=\"tippy-header\" style=\"margin-top: 0;\">Quantifying Batch Effects through kBET<a class=\"headerlink\" href=\"#quantifying-batch-effects-through-kbet\" title=\"Permalink to this heading\">#</a></h3><p>We utilized kBET, which is based on k-nearest neighbors, to assess whether all batches are well-mixed. In the BMSC-Specification_Kishor dataset, we observed that the rejection rates were similar between the observed and expected values. In contrast, for the CranioSoxc_Angelozzi dataset, the rejection rates were significantly higher than expected.</p>"}
skip_classes = ["headerlink", "sd-stretched-link"]

window.onload = function () {
    for (const [select, tip_html] of Object.entries(selector_to_html)) {
        const links = document.querySelectorAll(`div.content ${select}`);
        for (const link of links) {
            if (skip_classes.some(c => link.classList.contains(c))) {
                continue;
            }

            tippy(link, {
                content: tip_html,
                allowHTML: true,
                arrow: true,
                placement: 'auto-start', maxWidth: 500, interactive: false,
                onShow(instance) {MathJax.typesetPromise([instance.popper]).then(() => {});},
            });
        };
    };
    console.log("tippy tips loaded!");
};
